/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package be.seeseemelk.comboot;

import be.seeseemelk.comboot.connectors.Connector;
import be.seeseemelk.comboot.connectors.TCPConnector;
import be.seeseemelk.comboot.packets.*;
import lombok.RequiredArgsConstructor;

import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.channels.SeekableByteChannel;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;

public class App
{

    public static void main(String[] args) throws Exception
    {
        try (
            TCPConnector connector = connect();
            ComBootServer server = new ComBootServer(connector);
        )
        {
            server.run();
        }
    };

    private static TCPConnector connect() throws IOException
    {
        try
        {
            for (;;)
            {
                try
                {
                    return new TCPConnector("localhost", 4444);
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                    Thread.sleep(500L);
                }
            }
        }
        catch (InterruptedException e)
        {
            throw new IOException(e);
        }
    }
}
// 14 15
